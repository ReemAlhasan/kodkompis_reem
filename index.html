<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kodkompis Reem ‚Äì L√§r dig programmering och matematik p√• ett tryggt och lekfullt s√§tt</title>
  <meta name="description" content="Reem undervisar barn och unga i programmering online ‚Äì kurser, coaching och workshops f√∂r √•ldrarna 6‚Äì16 √•r." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
  <script src="translations.js"></script>
  <script src="i18n.js"></script>
  <style>
    /* Smooth scroll behavior */
    html {
      scroll-behavior: smooth;
    }
    
    /* Smooth scroll offset for fixed header */
    section[id] {
      scroll-margin-top: 100px;
    }
  </style>
  <!-- 
    Logo note: The logo image is stored in assets/ folder.
    For production, consider hosting it on a CDN or GitHub Pages for better performance.
    For Google Forms integration, the logo must be accessible via URL.
  -->
</head>
<body>
  <header class="site-header">
    <a class="logo" href="#top" aria-label="Start ‚Äì Kodkompis Reem">
      <img src="assets/Modern_playful_Kodkompis_Reem_logo_with_friendly_robot_and_coding_math_elements.png" 
           alt="Kodkompis Reem" 
           class="logo-img" 
           width="300" 
           height="70" />
      <span class="logo-text" aria-hidden="true">Kodkompis Reem</span>
    </a>

    <!-- Language Switcher -->
    <div class="lang-switcher" id="langSwitcher" role="group" aria-label="V√§lj spr√•k">
      <button data-lang="sv" class="lang-btn" aria-pressed="true" title="Svenska">SV</button>
      <button data-lang="en" class="lang-btn" aria-pressed="false" title="English">EN</button>
      <button data-lang="ar" class="lang-btn" aria-pressed="false" title="ÿßŸÑÿπÿ±ÿ®Ÿäÿ©">AR</button>
    </div>

    <!-- Dark mode toggle -->
    <button id="themeToggle" class="theme-toggle btn ghost" data-i18n-aria="themeToggle">
      <span class="theme-icon" aria-hidden="true">üåô</span>
    </button>

    <!-- Hamburger -->
    <button id="navToggle" class="nav-toggle" aria-label="√ñppna meny" aria-expanded="false" aria-controls="primary-nav">
      <span class="bar" aria-hidden="true"></span>
      <span class="bar" aria-hidden="true"></span>
      <span class="bar" aria-hidden="true"></span>
    </button>

    <!-- Meny -->
    <nav id="primary-nav" class="nav" aria-label="Huvudmeny">
      <a href="#om" data-i18n="navOm">Om Reem</a>
      <a href="#tjanster" data-i18n="navProgrammering">Programmering</a>
      <a href="#matte" data-i18n="navMatte">Mattehj√§lp</a>
      <a href="#pussel" data-i18n="navPussel">Dagens pussel</a>
      <a class="cta" href="https://calendar.app.google/hcGm2jFduV7YPKEc6" target="_blank" rel="noopener" data-i18n="navBoka">Boka lektion</a>
      <a href="#kontakt" data-i18n="navKontakt">Kontakta</a>
    </nav>
  </header>

  <main id="top">
    <!-- HERO -->
    <section class="hero" role="region" aria-labelledby="hero-title">
      <div class="hero-inner">
        <h1 id="hero-title" data-i18n="heroTitle">Programmering och matematik f√∂r barn och unga ‚Äì tryggt, kul och smart üí°</h1>
        <p class="lead" data-i18n="heroLead">Hej! Jag heter <strong>Reem</strong> och jag studerar <strong>till Civilingenj√∂r i Medieteknik och AI</strong>. Jag √§lskar att hj√§lpa barn att uppt√§cka kodning ‚Äì som att l√§ra sig prata med sn√§lla robotar.</p>
        <div class="hero-math">
          <h2 class="hero-math-title" data-i18n="heroMathTitle">L√§r dig matte online ‚Äì enkelt och flexibelt </h2>
          <p class="hero-math-sub" data-i18n="heroMathSub">Fr√•n grundskola till universitet ‚Äì Reem f√∂rklarar tills du f√∂rst√•r.</p>
        </div>
        <div class="hero-actions">
          <a class="btn primary" href="https://calendar.app.google/hcGm2jFduV7YPKEc6" target="_blank" rel="noopener" data-i18n="heroBtnBook">Boka lektion</a>
          <a class="btn ghost" href="#tjanster" data-i18n="heroBtnCourses">Se alla kurser</a>
        </div>
        <figure class="hero-ill">
          <img src="https://cdn.jsdelivr.net/npm/@tabler/icons/icons/brand-python.svg" alt="Python Icon" width="24" height="24" />
          <img src="https://uxwing.com/wp-content/themes/uxwing/download/brands-and-social-media/c-plus-plus-programming-language-icon.svg" alt="C++ icon" width="24" height="24" />
          <img src="https://cdn.jsdelivr.net/npm/@tabler/icons/icons/robot.svg" alt="Robot Icon" width="24" height="24" />
        </figure>
      </div>
    </section>

    <!-- OM -->
    <section id="om" class="section" aria-labelledby="om-title">
      <div class="container grid-2">
        <div>
          <h2 id="om-title" data-i18n="aboutTitle">Vem √§r Reem?</h2>
          <p data-i18n="aboutText">
            Jag √§r en nyfiken och lugn coach som tror att <em>alla</em> kan l√§ra sig programmera.
            Jag studerar <strong>till Civilingenj√∂r i Medieteknik och AI</strong> vid Link√∂pings universitet och anv√§nder lekfulla √∂vningar, sm√• projekt och tydliga f√∂rklaringar.
          </p>
          <ul class="check">
            <li data-i18n="aboutItem1">Trygg och positiv l√§rmilj√∂</li>
            <li data-i18n="aboutItem2">Personlig uppf√∂ljning och feedback</li>
            <li data-i18n="aboutItem3">√Öldersanpassat inneh√•ll</li>
          </ul>
          <div class="cta-wrapper">
            <a class="btn primary" href="https://calendar.app.google/hcGm2jFduV7YPKEc6" target="_blank" rel="noopener" data-i18n="aboutBtn">Boka din lektion</a>
          </div>
        </div>
        <div>
          <div class="card soft">
            <h3 data-i18n="aboutWhyTitle">Varf√∂r kodning f√∂r barn?</h3>
            <p data-i18n="aboutWhy1">Kodning tr√§nar logiskt t√§nkande, kreativitet och probleml√∂sning ‚Äì superkrafter f√∂r framtiden! üéØ</p>
            <p data-i18n="aboutWhy2">Vi bygger spel, sm√• appar och robotlogik. Barnen f√•r skapa, testa och v√•ga g√∂ra fel.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- TJ√ÑNSTER (PROGRAMMERING) -->
    <section id="tjanster" class="section" aria-labelledby="tjanster-title">
      <div class="container">
        <h2 id="tjanster-title" data-i18n="progTitle">Programmering f√∂r barn & f√∂r√§ldrar</h2>
        <p data-i18n="progIntro">V√§lj den √•ldersgrupp som passar ditt barn b√§st.</p>
        <div class="cards">
          <!-- 6‚Äì8 -->
          <article class="card">
            <h3 data-i18n="prog68Title">üß© Onlinekurs (6‚Äì8 √•r)</h3>
            <p><strong>Fokus:</strong> <span data-i18n="prog68Focus">lekfull introduktion till datorns t√§nk med visuella block (t.ex. Scratch Jr). Vi skapar sm√• ber√§ttelser och spel.</span></p>
            <ul class="meta">
              <li data-i18n="progFormat">Format: online via Google Meet</li>
              <!-- <li>Grupp (6‚Äì8 barn): <strong>45 min ‚Äì 150 kr/elev</strong></li> -->
              <li><span data-i18n="progPrivate">Privatlektion:</span> <strong>60 min ‚Äì 149 kr</strong></li>
            </ul>
            <a class="btn primary" href="https://calendar.app.google/hcGm2jFduV7YPKEc6" target="_blank" rel="noopener" data-i18n="progBtnBook">Boka lektion</a>
          </article>

          <!-- 9‚Äì12 -->
          <article class="card">
            <h3 data-i18n="prog912Title">üéÆ Onlinekurs (9‚Äì12 √•r)</h3>
            <p><strong>Fokus:</strong> <span data-i18n="prog912Focus">Scratch & f√∂rsta stegen i <em>Python</em>. Vi bygger spel, tr√§nar logik och provar riktig kod.</span></p>
            <ul class="meta">
              <li data-i18n="progFormat">Format: online via Google Meet</li>
              <!-- <li>Grupp (8‚Äì10 barn): <strong>60 min ‚Äì 200 kr/elev</strong></li> -->
              <li><span data-i18n="progPrivate">Privatlektion:</span> <strong>60 min ‚Äì 175 kr</strong></li>
            </ul>
            <a class="btn primary" href="https://calendar.app.google/hcGm2jFduV7YPKEc6" target="_blank" rel="noopener" data-i18n="progBtnBook">Boka lektion</a>
          </article>

          <!-- 13‚Äì16 -->
          <article class="card">
            <h3 data-i18n="prog1316Title">üíª Onlinekurs (13‚Äì16 √•r)</h3>
            <p><strong>Fokus:</strong> <span data-i18n="prog1316Focus"><em>Python & webbutveckling</em> med probleml√∂sning, enkel AI och projekt till portf√∂lj.</span></p>
            <ul class="meta">
              <!-- <li>Grupp (8‚Äì12 barn): <strong>75 min ‚Äì 250 kr/elev</strong></li> -->
              <li data-i18n="progFormat">Format: online via Google Meet</li>
              <li><span data-i18n="progPrivate">Privatlektion:</span> <strong>60 min ‚Äì 199 kr</strong></li>
            </ul>
            <a class="btn primary" href="https://calendar.app.google/hcGm2jFduV7YPKEc6" target="_blank" rel="noopener" data-i18n="progBtnBook">Boka lektion</a>
          </article>

          <!-- Coaching -->
          <article class="card">
            <h3 data-i18n="progCoachingTitle">üéØ Coaching 1:1</h3>
            <p><strong>Fokus:</strong> <span data-i18n="progCoachingFocus">personlig handledning f√∂r l√§xor, t√§vlingsf√∂rberedelser eller egna projekt.</span></p>
            <ul class="meta">
              <li data-i18n="progFormat">Format: online via Google Meet</li>
              <li><span data-i18n="progIndividual">Individuell:</span> <strong>30 min ‚Äì 200 kr</strong></li>
            </ul>
            <a class="btn primary" href="https://calendar.app.google/hcGm2jFduV7YPKEc6" target="_blank" rel="noopener" data-i18n="progBtnDirect">Boka direkt</a>
          </article>
        </div>
      </div>
    </section>

    <!-- MATTE -->
    <section id="matte" class="section" aria-labelledby="matte-title">
      <div class="container">
        <h2 id="matte-title" data-i18n="mathTitle">Mattehj√§lp online üßÆüìèüéì</h2>
        <p data-i18n="mathIntro">Alla lektioner sker online (Google Meet). Inga fysiska m√∂ten ‚Äì flexibelt och tryggt.</p>

        <div class="cards">
          <!-- L√•gstadiet -->
          <article class="card">
            <h3 data-i18n="mathLowTitle">üßÆ L√•gstadiet (√•k 1‚Äì3)</h3>
            <p><strong>Fokus:</strong> <span data-i18n="mathLowFocus">r√§knef√∂rst√•else, matematiskt spr√•k, lekfullt l√§rande.</span></p>
            <ul class="meta">
              <li data-i18n="progFormat">Format: online via Google Meet</li>
              <!-- <li>Grupp (3‚Äì4 elever): <strong>60 min ‚Äì 200 kr/elev</strong></li> -->
              <li><span data-i18n="progPrivate">Privatlektion:</span> <strong>60 min ‚Äì 149 kr</strong></li>
            </ul>
            <a class="btn primary" href="https://calendar.app.google/hcGm2jFduV7YPKEc6" target="_blank" rel="noopener" data-i18n="progBtnBook">Boka lektion</a>
          </article>

          <!-- Mellan/H√∂gstadiet -->
          <article class="card">
            <h3 data-i18n="mathMidTitle">üßÆ Mellan- & h√∂gstadiet (√•k 4‚Äì9)</h3>
            <p><strong>Fokus:</strong> <span data-i18n="mathMidFocus">f√∂rst√• grunderna, bygga sj√§lvf√∂rtroende, logiskt t√§nkande.</span></p>
            <ul class="meta">
              <li data-i18n="progFormat">Format: online via Google Meet</li>
              <!-- <li>Grupp (3‚Äì4 elever): <strong>60 min ‚Äì 200 kr/elev</strong></li> -->
              <li><span data-i18n="progPrivate">Privatlektion:</span> <strong>60 min ‚Äì 175 kr</strong></li>
            </ul>
            <a class="btn primary" href="https://calendar.app.google/hcGm2jFduV7YPKEc6" target="_blank" rel="noopener" data-i18n="progBtnBook">Boka lektion</a>
          </article>

          <!-- Gymnasiet -->
          <article class="card">
            <h3 data-i18n="mathHighTitle">üìè Gymnasiematte (Matte 1‚Äì4)</h3>
            <p><strong>Fokus:</strong> <span data-i18n="mathHighFocus">kursst√∂d och nationella prov</span></p>
            <ul class="meta">
              <li data-i18n="progFormat">Format: online via Google Meet</li>
              <li><span data-i18n="progIndividual">Individuell:</span> <strong>60 min ‚Äì 199 kr</strong></li>
            </ul>
            <a class="btn primary" href="https://calendar.app.google/hcGm2jFduV7YPKEc6" target="_blank" rel="noopener" data-i18n="progBtnBook">Boka lektion</a>
          </article>
        </div>
      </div>
    </section>
    <!-- BOOKING-SEKTION -->
    <section id="booking" class="section" aria-labelledby="booking-title">
      <div class="container">
        <h2 id="booking-title" data-i18n="bookingTitle">üìÖ Boka en lektion</h2>
        <p data-i18n="bookingIntro">V√§lj ett ledigt datum och tid som passar dig. Alla lektioner sker online via Google Meet.</p>
        
        <div class="booking-container">
          <!-- Google Calendar Appointment Scheduling -->
          <div class="calendar-booking-wrapper">
            <div class="calendar-booking-content">
              <h3>V√§lj datum och tid</h3>
              <p>Klicka p√• knappen nedan f√∂r att √∂ppna bokningskalendern d√§r du kan se alla lediga tider och boka direkt.</p>
              <a href="https://calendar.app.google/hcGm2jFduV7YPKEc6" 
                 class="btn primary booking-btn-large"
                 target="_blank"
                 rel="noopener">
                üóìÔ∏è √ñppna bokningskalender
              </a>
              <p class="booking-note">Bokningen √∂ppnas i ett nytt f√∂nster. Efter bokning f√•r du en bekr√§ftelse via e-post.</p>
            </div>
          </div>
          
          <!-- Quick Info -->
          <div class="booking-info-cards">
            <div class="card">
              <h3>‚è∞ Flexibla tider</h3>
              <p>Boka n√§r det passar dig. Alla lektioner sker online via Google Meet ‚Äì tryggt och bekv√§mt.</p>
            </div>
            <div class="card">
              <h3>‚úÖ Direktbokning</h3>
              <p>Se lediga tider direkt i kalendern och boka med ett klick. Du f√•r omedelbar bekr√§ftelse via e-post.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- DAGENS PUSSEL -->
    <section id="pussel" class="section" aria-labelledby="pussel-title">
      <div class="container">
        <h2 id="pussel-title" data-i18n="puzzleTitle">Dagens kodpussel üß©</h2>
        <p data-i18n="puzzleIntro">V√§lj √•lder och l√∂s ett kort pussel. Svara direkt h√§r och avsl√∂ja facit n√§r du √§r klar!</p>

        <div class="puzzle-ui">
          <label for="age">√Ölder</label>
          <select id="age" name="age" aria-label="V√§lj √•ldersgrupp">
            <option value="6-8">6‚Äì8 √•r</option>
            <option value="9-12">9‚Äì12 √•r</option>
            <option value="13-16">13‚Äì16 √•r</option>
          </select>

        <button id="loadPuzzle" class="btn">Visa dagens pussel</button>
        </div>

        <article class="puzzle-card" aria-live="polite">
          <h3 id="puzzle-title">‚Äî</h3>
          <p id="puzzle-text">Tryck p√• "Visa dagens pussel".</p>
          <textarea id="puzzle-answer" placeholder="Skriv ditt svar h√§r‚Ä¶" aria-label="Ditt svar" disabled></textarea>
          <div class="puzzle-actions">
            <button id="checkAnswer" class="btn" disabled>Kolla svar</button>
            <button id="showHint" class="btn ghost" disabled>Ledtr√•d</button>
            <button id="reveal" class="btn ghost" disabled>Visa facit</button>
          </div>
          <p id="puzzle-feedback" class="feedback" role="status" aria-live="assertive"></p>
        </article>
      </div>
    </section>

    <!-- KONTAKT -->
    <section id="kontakt" class="section" aria-labelledby="kontakt-title">
      <div class="container grid-2">
        <div>
          <h2 id="kontakt-title" data-i18n="contactTitle">Kontakta Reem</h2>
          <p data-i18n="contactIntro">Har du fr√•gor eller vill du boka en plats? Fyll i formul√§ret s√• √•terkommer jag inom 24 timmar. Du kan ocks√• boka direkt via kalendern ovan.</p>

          <!-- Direkt till Google Apps Script (ers√§tter Formspree) -->
          <form id="contactForm" class="form" action="https://script.google.com/macros/s/AKfycbyFK62JErVwKmvus6m72PyVXJHpQs7Sp-rE9ogj_IWocmY6kQB4HQpZpmwlhh0eWCUEjA/exec" method="POST" novalidate>
            <!-- Honeypot mot spam-botar -->
            <input type="text" name="hp" tabindex="-1" autocomplete="off" aria-hidden="true" />

            <div class="field">
              <label for="topic">√Ñmne</label>
              <select id="topic" name="topic" required>
                <option value="">V√§lj √§mne‚Ä¶</option>
                <option>Programmering</option>
                <option>Mattehj√§lp</option>
                <option>√ñvrigt</option>
              </select>
            </div>

            <div class="field">
              <label for="parentName">F√∂r√§lders namn</label>
              <input id="parentName" name="name" type="text" required autocomplete="name" />
            </div>

            <div class="field">
              <label for="email">E-post</label>
              <input id="email" name="email" type="email" required autocomplete="email" />
            </div>

            <div class="field">
              <label for="phone">Mobilnummer</label>
              <input id="phone" name="phone" type="tel" required autocomplete="tel" />
            </div>

            <div class="field">
              <label for="childAge">Barnets √•lder</label>
              <input id="childAge" name="childAge" type="number" min="3" max="25" required />
            </div>

            <div class="field">
              <label for="message">Meddelande</label>
              <textarea id="message" name="message" rows="4" placeholder="Ber√§tta g√§rna vad ni √§r intresserade av‚Ä¶" required></textarea>
            </div>

            <div class="field">
              <label class="checkbox">
                <input type="checkbox" name="consent" value="Godk√§nner" required />
                Jag samtycker till att mina uppgifter anv√§nds f√∂r att Reem ska kunna kontakta mig.
              </label>
            </div>

            <button class="btn primary" type="submit">Skicka</button>
            <p class="form-note" id="formNote" role="status" aria-live="polite"></p>
          </form>

          <p class="contact-meta">E-post: <a href="mailto:kodkompisreem@gmail.com">KodKompisReem@gmail.com</a></p>
        </div>
        <aside>
          <div class="card soft">
            <h3>Trygghet & Integritet</h3>
            <ul class="check">
              <li>Ingen kameraobligatorisk n√§rvaro f√∂r barn</li>
              <li>Inspelning endast med f√∂r√§lders godk√§nnande</li>
              <li>Tydliga trivselregler i varje grupp</li>
            </ul>
          </div>
          <div class="card soft trust-card">
            <h3>Varf√∂r v√§lja Reem?</h3>
            <ul class="check">
              <li>Civilingenj√∂rsstudent i Medieteknik & AI</li>
              <li>Personlig uppf√∂ljning och feedback</li>
              <li>√Öldersanpassat inneh√•ll</li>
            </ul>
          </div>
        </aside>
      </div>
    </section>
  </main>

  <!-- Floating CTA Button -->
  <a href="https://calendar.app.google/hcGm2jFduV7YPKEc6" class="floating-cta" data-i18n-aria="navBoka" target="_blank" rel="noopener">
    <span data-i18n="floatingCTA">üìÖ Boka nu</span>
  </a>

  <footer class="site-footer">
    <div class="container">
      <p>¬© <span id="year"></span> <span data-i18n="footerText">Kodkompis Reem ¬∑ Byggd med ‚ô• f√∂r nyfikenhet</span></p>
    </div>
  </footer>

  <!-- Konfigurera endpoint f√∂r dagens pussel (Google Apps Script Web App) -->
  <script>
    window.PUZZLES_ENDPOINT = 'https://script.google.com/macros/s/AKfycbzcmL2XsBY5nPyvnpxpYwgB8sTPtNDGx6TcXTF3IBytegmlloHjRkMaASVl2V1FWHMYlA/exec';
    
    // ‚ö†Ô∏è SETUP REQUIRED: Replace with your Google Apps Script web app URL after deploying chatbot-api.gs
    // Get the URL from: Deploy > Deploy as web app > Web app URL
    window.CHATBOT_API_ENDPOINT = 'https://script.google.com/macros/s/AKfycby-7D7qKYI_Vclik2SwYsvgs8zpRAzh9eGPSLXquodbWB3P7aU2F6r5uGc78uWQoEM36Q/exec';
  </script>

  <script src="pussel.js"></script>
  <script src="chatbot.js"></script>
  
  <script>
    (function () {
      const form = document.getElementById('contactForm');
      const note = document.getElementById('formNote');
      if (!form) return;
  
      form.addEventListener('submit', async (e) => {
        // Allow pure HTML fallback if fetch is missing
        if (!window.fetch) return;
        e.preventDefault();
  
        if (!form.checkValidity()) {
          note.textContent = window.i18n ? window.i18n.t('formInvalid') : 'Kolla s√• att alla f√§lt √§r ifyllda korrekt.';
          form.reportValidity();
          return;
        }
  
        // Honeypot (bot-skydd)
        const hp = form.querySelector('input[name="hp"]')?.value || '';
        if (hp.trim() !== '') {
          note.textContent = window.i18n ? window.i18n.t('formSuccess') : 'Tack! Ditt meddelande √§r skickat.'; // tyst OK
          form.reset();
          return;
        }
  
          note.textContent = window.i18n ? window.i18n.t('formSending') : 'Skickar‚Ä¶';
  
        try {
          await fetch(form.action, {
            method: 'POST',
            mode: 'no-cors',          // üîë no CORS preflight
            body: new FormData(form)  // üîë FormData (no headers!)
          });
  
          // Response is opaque in no-cors, so we optimistically show success.
          note.textContent = window.i18n ? window.i18n.t('formSuccess') : 'Tack! Ditt meddelande √§r skickat. Jag √•terkommer inom 24 timmar.';
          form.reset();
        } catch (err) {
          console.error('Kontaktform undantag:', err);
          note.textContent = window.i18n ? window.i18n.t('formError') : 'N√§tverksfel. Kontrollera din uppkoppling eller mejla kodkompisreem@gmail.com';
        }
      });
    })();
  
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>

  <!-- Theme Management -->
  <script>
    // Theme management
    (function() {
      const themeToggle = document.getElementById('themeToggle');
      const themeIcon = themeToggle?.querySelector('.theme-icon');
      const STORAGE_KEY = 'kodkompis-theme';
      
      // Get system preference
      function getSystemTheme() {
        return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      }
      
      // Get saved theme or system preference
      function getTheme() {
        const saved = localStorage.getItem(STORAGE_KEY);
        return saved || getSystemTheme();
      }
      
      // Set theme
      function setTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem(STORAGE_KEY, theme);
        updateThemeIcon(theme);
      }
      
      // Update toggle button icon
      function updateThemeIcon(theme) {
        if (!themeIcon) return;
        themeIcon.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        // Use i18n for aria-label translation
        const labelKey = theme === 'dark' ? 'themeToggleLight' : 'themeToggle';
        const label = window.i18n ? window.i18n.t(labelKey) : (theme === 'dark' ? 'Byt till ljust l√§ge' : 'Byt till m√∂rkt l√§ge');
        themeToggle.setAttribute('aria-label', label);
      }
      
      // Toggle theme
      function toggleTheme() {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        setTheme(newTheme);
      }
      
      // Initialize theme
      function initTheme() {
        const theme = getTheme();
        setTheme(theme);
        
        // Listen for system theme changes (if no manual preference)
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
          if (!localStorage.getItem(STORAGE_KEY)) {
            setTheme(e.matches ? 'dark' : 'light');
          }
        });
        
        // Listen for language changes to update theme toggle aria-label
        document.addEventListener('languageChanged', () => {
          const currentTheme = document.documentElement.getAttribute('data-theme');
          if (currentTheme) {
            updateThemeIcon(currentTheme);
          }
        });
        
        // Add click event to toggle button
        if (themeToggle) {
          themeToggle.addEventListener('click', toggleTheme);
        }
      }
      
      // Initialize when DOM is loaded
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initTheme);
      } else {
        initTheme();
      }
    })();
  </script>

  <script>
    // Hamburger toggle
    (function(){
      const toggle = document.getElementById('navToggle');
      const nav = document.getElementById('primary-nav');
      if (!toggle || !nav) return;
      toggle.addEventListener('click', () => {
        const open = nav.classList.toggle('open');
        toggle.setAttribute('aria-expanded', open ? 'true' : 'false');
        document.body.classList.toggle('no-scroll', open);
      });
    })();
  </script>

</body>
</html>



